<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href="a.css" type="text/css" rel="stylesheet" charset="utf-8" />
        <link href="styles/dark.css" type="text/css" rel="stylesheet" charset="utf-8" />
        <title>压力很大的BLOG</title>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
        <script type="text/javascript" src="/underscore-min.js"></script>
        <script type="text/javascript" src="/showdown.js"></script>
        <script src="/highlight.pack.js"></script>
        <script type="text/javascript">
            function render_list(datas){
                var template = _.template($("#post_list_template").html());
                html=template(datas);
                $("#list_container").html(html);
            }
            function goto(name){
                window.location.hash="#!"+name;
                window.location.reload();
            }
            function show_post(name){
                window.location.hash="#!"+name;
                $("#list_container").html("");
                $("#list_container").hide();
                $("#loading").show();
                $.get(
                        "/blogs/"+name,
                        function(data){
                            var converter = new Showdown.converter();
                            var html = converter.makeHtml(data);
                            $("#post-text").html(html);
                            $("#post-content").show();
                            $("#loading").hide();
                        }
                );
            }
            function show_index(){
                $("#loading").show();
                $("#post-text").html("");
                $("#post-content").hide();
                $.getJSON(
                        "/list.json",
                        function(data){
                            $("#loading").hide();
                            $("#list_container").show();
                            render_list(data);
                        }
                    );
            }
            $(function(){
                 var params=window.location.hash;
                 if(params.length>0){
                     name=params.split('!')[1]
                     show_post(name);
                     hljs.tabReplace = '    ';
                     hljs.initHighlighting();
                 }else{
                     show_index();
                 }
             }
            );
        </script>
    </head>
    <body>
        <div class="header"><a class="fl mt40 ml20" href="/">我来组成头部</a></div>
        <div class="content">
            <div id="side" class="fl side">
                <img class="fl ml40" src="images/me1-1.jpg"/>
                <div class="fl mt40 disp">我还没想好介绍怎么写，所以这里存在的文字都是子虚乌有的</div>
            </div>
            <div id="posts" class="posts ml200">
                <div id="loading" class="loading" style="display:none;"> <img src="images/loading.gif"/> </div>
                <div class="wrapper" id="list_container">
                </div>
                <div id="post-content" class="text">
                    <div id="post-text"></div>
                    <div id="disqus_thread"></div>
                    <script type="text/javascript">
                            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                        var disqus_shortname = 'alexandersblognew'; // required: replace example with your forum shortname

                            /* * * DON'T EDIT BELOW THIS LINE * * */
                            (function() {
                                     var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                                             dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                                                     (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                                                         })();
                                                     </script>
                                                     <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                                                     <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
                </div>
            </div>
        </div>
        <div class="main footer">版权申明</div>
    </body>
    <script id="post_list_template" type="text/template">
        <%_.each(data,function(post){%>
        <dl>
           <dt class="h20">
           <span class="fl"> <a href="javascript:void(0);" onclick="goto('<%=post.name%>');"><%=post.title%></a></span><span class="fr timestamp mt10"> &gt;发布时间&nbsp;<%=post.date%></span>
               <span class="slear"></span>
           </dt>
           <dd><%=post.disp%></dd>
           <dd> <div class="fr commend">☆ N个评论(<a href="javascript:void(0);">展开评论</a>)</div></dd>
       </dl>
       <%});%>
    </script>
</html>
