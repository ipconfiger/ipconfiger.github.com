--- 
layout: post
title: Apple TV3不完全试玩手册
---

### 先来吐个槽

入手Apple TV3是个很偶然的机会，之前一直想入手一个可以在电视上放网络电影的东西，所以试过很多不同奇葩的产品。最早是美如画的SD卡播放器，这货需要自己下载，传SD卡上，然后插电视，所以用起来非常不方便，所以用了没多久就束之高阁了。后来有个可以运行安卓系统的奇葩高清播放器，当时700多，片源很奇葩，操作很奇葩，说是安卓系统结果啥APP都装不了。最后折价处理掉了。后来出现了MK802这类安卓棒子，遂入了一个，便宜倒是便宜，不过需要外接一个无线鼠标，用起来响应速度还是不错，还能玩玩愤怒的小鸟，切切水果什么的，不过在沙发上用无线鼠标很是别扭。不过坏得也快，用了1个多月就坏掉了，一直停留在开机状态再也进不到系统了。之后有了树莓派，由于CPU很挫，所以XMBC跑起来相当的卡，而且XMBC又不能调用omxplayer去牛逼轰轰的玩硬解码1080p高清视频，因为omxplayer支持m3u8格式的HFS流播放方案，然后我就试图自己用百度网盘的API接口获取转码接口得到的m3u8文件通过omxplayer来播放。结果很容易出现音画不同步的情况。小米盒子，你抢得到么？抢到盒子的黄牛坐地起价要加400多，人争一口气佛争一炷香不买也罢。百度影棒？还会靠抢购的货，还只能用百度自家的片源。且各式各样的安卓盒子棒子什么的并不能良好的支持Airplay，所以干脆不看也不想，果断的Apple TV3了。

有空的时候会集其所有的盒子棒子做个横向对比，然后召唤神龙……
如果有好心人借我新小米盒子（抢不到），百度影棒（还是抢不到），阿里棒子（还没出)… 的话

### 第一眼印象
下面结束各种吐槽进入正题，我们来谈谈Apple TV3.（以下将用ATV3来表示）

![image](http://www.techgradergeek.com/wp-content/uploads/2012/10/Apple-TV-3.png)

先从外观入手，首先一个漂亮的外观是非常重要的，如果把ATV3和其他的盒子棒子放在一起就如同在停满大众的停车场里突然开进来一辆马萨拉蒂。有一个著名的理论就是如果看起来漂亮的飞机，一定是好飞机，窃以为同样的理论一样可以用于盒子界。如果都分不出精力来搞个漂亮的壳子，多半是因为连基本功能都还没调试妥当就拿出来销售了…

接口什么的就不用多说了，HDMI，网线（由于家里wifi不给力就插了跟网线，回头用Time Capsule来替换了），插上电源，把电视输入源切换到HDMI，然后哒哒~~~~

![image](http://ww1.sinaimg.cn/large/578b198bgw1e9tcf54y0tj20jz0dajtp.jpg)

其实经过实测itunes上的影片是可以播放的，没有被墙，但是慢是慢得可以，你要是能等的话，还是能用，另经过测试里面的电台功能是可以用的，很流畅。操作上通过remote来控制非常的流畅，毫无违和感，由于手里没有小米盒子无法对比，以后有机会再来。

需要流畅度的看片，我们只能这么干：

### DNS劫持可以破

DNS劫持这回事，其实是用一个DNS代理将ATV3的预告片频道的请求通过DNS代理层次劫持到指定的服务器上，服务器冒名顶替了预告片频道的内容，用搜狐，优酷，迅雷等片源的内容替代了预告片频道内部的内容。

新浪微博上的@盒子大师 提供了国内很多片源的DNS劫持服务

具体实施过程如下：
![image](http://ww3.sinaimg.cn/large/578b198bgw1e9tcz12f6jj20ja0cr75r.jpg)

![image](http://ww1.sinaimg.cn/large/578b198bgw1e9td6uaua4j20ji0bjq3q.jpg)

![image](http://ww4.sinaimg.cn/large/578b198bgw1e9td8g3xa0j20jl0c1jsf.jpg)

![image](http://ww4.sinaimg.cn/large/578b198bgw1e9td9xri7rj20jq0b2aay.jpg)

![image](http://ww3.sinaimg.cn/large/578b198bgw1e9tdbbm7n5j20jx0cpt9u.jpg)

![image](http://ww1.sinaimg.cn/large/578b198bgw1e9tdedn2i8j20k30dujsq.jpg)

![image](http://ww2.sinaimg.cn/large/578b198bgw1e9tdfmzj3pj20je0bv3zk.jpg)

设为这个值后一路点Remote，也就是遥控器上的Menu键回到首页，点击预告片：

![image](http://ww4.sinaimg.cn/large/578b198bgw1e9tdhq1uusj20ju0eq76g.jpg)

### 世界将为你打开

![image](http://ww3.sinaimg.cn/large/578b198bgw1e9tdj34p8wj20kf0ecgob.jpg)

去搜狐看看美剧：
![image](http://ww1.sinaimg.cn/large/578b198bgw1e9tdknyvkqj20k10ecmyi.jpg)

![image](http://ww1.sinaimg.cn/large/578b198bgw1e9tdlytd8mj20k90djta9.jpg)

Airplay就不上图了，上图也看不出区别，自家产品用起来超级简单，稳定。

很多安卓盒子、棒子都说自己支持Airplay，结果实际使用起来只能说是一塌糊涂，估计都是用了同一个开源项目的代码而已。xmbc的Airplay音频尚可，视频是连上一次断开后第二次死活搜索不到设备，也是完全不具备可用性。

大部分执着于安卓盒子或者树莓派的人最后给出的说法是要看移动硬盘下载下来的，这个随便一个硬盘盒子播放器就能搞定的事情，至于这么兴师动众么

### 开发者的福利

对于自己有开发能力的同学来说，@盒子大师 留下的个人链接的口是一个很方便的途径让ATV可以播放自己的片源，NAS的也好，或者百度网盘上的影片。

百度网盘是个不错的主意，很适合影片的分享，而且上面的片子都比较新，所以，我们来看看如何在ATV上播放网盘里的影片。

首先，如果想创建个人链接，你必须先注册DNS的帐号。在这个地方


密码用你想要注册的密码，因为登录不成功后就会让你再输入一次刚才的密码，然后就用你之前填的用户名密码注册了。

注册后在电脑上打开浏览器进入  http://www.atvttvv.net/  然后用刚才注册的用户名和密码登录。

先无视掉那个超级简陋的界面，据说@盒子大师 在做新版，也许到时候会完善界面功能什么的。这个时候我们可以去先准备播放的链接了。

由于用百度网盘的片源，我不打算用比较极端的hack的方式来获取播放地址，而是通过百度开放API的接口，其中有一个视频转码的接口很是销魂，可以指定清晰度转换输出对应的mp4格式的影片。经过实际调用发现，由于百度采用了分布式的转码技术，所以其实返回的是已经转码完成片段的m3u8文件。但是由于转码速度的问题仍需要大概好几分钟才能转码完毕，但是有不会通知你转码完毕了，所以只能不停的调用这个接口，直到最后获取的m3u8文件的大小不再变化为止。

#### 首先我们要登录百度帐号获取到token

#注意，下面内容因为百度云的云转码接口不稳定，待稳定后再补上

